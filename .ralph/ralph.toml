[loop]
max_iterations = 10
no_progress_limit = 3
rate_limit_per_hour = 0            # 0 = disabled
sleep_seconds_between_iters = 0
runner_timeout_seconds = 900       # Codex can be slow; increase for large repos

[files]
# Default (recommended): keep all Ralph durable memory in .ralph/
prd = ".specs/spec-2026-01-15-xkit-prd.md"  # use approved PRD
progress = ".ralph/progress.md"
prompt = ".ralph/PROMPT_build.md"
agents = ".ralph/AGENTS.md"
specs_dir = ".ralph/specs"

[tracker]
# auto|markdown|json|beads
kind = "auto"

[git]
# Branch automation from PRD metadata.
# - per_prd: uses branchName (JSON) or `Branch:`/`branchName:` in PRD.md header
# - none: do not switch/create branches
branch_strategy = "per_prd"
base_branch = ""                 # empty => current branch
branch_prefix = "ralph/"         # used when PRD doesn't specify branch

# Commit automation (recommended): if the agent forgets to commit, Ralph will.
auto_commit = true
commit_message_template = "ralph: {story_id} {title}"
amend_if_needed = true            # if agent committed but left a dirty worktree, amend

[gates]
# Optional: commands to run after each iteration.
# If any gate fails, the loop will keep the current task open and will not allow EXIT_SIGNAL=true.
commands = ["pnpm lint", "pnpm test"]

[gates.llm_judge]
# Optional: LLM-as-judge quality gate.
# When enabled, Ralph will run a second agent run after each iteration *only when*
# the selected task is marked done, and ask it to judge whether the task is truly complete.
enabled = false
agent = "claude"
prompt = ".ralph/PROMPT_judge.md"
max_diff_chars = 30000

[runners.codex]
# Codex CLI supports reading prompt text from stdin when PROMPT is '-'.
argv = ["codex", "exec", "--full-auto", "-"]

[runners.claude]
argv = ["claude", "-p", "--output-format", "stream-json"]

[runners.copilot]
argv = ["copilot", "--prompt"]
